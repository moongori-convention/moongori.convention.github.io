"use strict";var jsonData,initJson=[{code:"0001",display:"Y"},{code:"0002",display:"Y"},{code:"0003",display:"Y"},{code:"0004",display:"Y"},{code:"0005",display:"Y"},{code:"0006",display:"Y"},{code:"0007",display:"Y"},{code:"0008",display:"Y"},{code:"0009",display:"Y"},{code:"0010",display:"Y"},{code:"0011",display:"Y"},{code:"0012",display:"Y"},{code:"0013",display:"Y"},{code:"0014",display:"Y"},{code:"0015",display:"Y"},{code:"0016",display:"Y"},{code:"0017",display:"Y"},{code:"0018",display:"Y"},{code:"0019",display:"Y"}],headerHeight=$(".category-list.type1").outerHeight(),category_cnt=0;function init(){categoryTitleBr(),$.getJSON("user_category_data.json",function(e){jsonData=e}).done(function(){}).fail(function(){console.log("error"),jsonData=initJson,category_cnt=Object.keys(initJson).length}).always(function(){orderCategory(!0)}),fixedCategory()}function fixedCategory(){var e=$(".section.category");e.offset().top-headerHeight-$(window).scrollTop()<0&&($(".category-list-wrap").addClass("fixed"),activeCategory()),(e.offset().top+e.outerHeight()-headerHeight-$(window).scrollTop()<0||0<e.offset().top-headerHeight-$(window).scrollTop())&&$(".category-list-wrap").removeClass("fixed")}function activeCategory(){$("[id^=cate-]").not(".hide").each(function(e){var t=$(this).attr("id").split("-")[1];$(this).offset().top-headerHeight-20-$(window).scrollTop()<0&&((t=$(".category-list.type1 .category-name."+t)).addClass("active").siblings().removeClass("active"),e=t.outerWidth()*e,$(".category-list-innerwrap").scrollLeft(e))})}function settingCategory(){for(var e=new Array,t=0;t<19;t++){var o=new Object,a=$(".category-list.type2 .category-item").eq(t);o.code=a.attr("data-code"),o.display=a.find("input[type='checkbox']").prop("checked")?"Y":"N",e.push(o)}jsonData=e}function orderCategory(){category_cnt=0,[].forEach.call(jsonData,function(e){var t="[data-code='"+e.code+"']",o=$(".category-list.type1 .category-name"+t),a=$(".category-list.type2 .category-item"+t),t=$("#category-wrap .category-inner"+t);$(".category-list.type1").append(o),$("#category-wrap").append(t),$(".category-list.type2").append(a),"Y"==e.display?(category_cnt++,o.removeClass("hide"),t.removeClass("hide"),t.find(".goods-list, .category-banner-list").slick("refresh"),a.removeClass("unenabled"),a.find("input").prop("checked",!0)):(o.addClass("hide"),t.addClass("hide"),a.addClass("unenabled"),a.find("input").prop("checked",!1))}),$(".category-description .description2 span").text(category_cnt)}function categoryTitleDetach(){$(".category-list.type1 .category-name").each(function(){var e=$(this).text();$(this).text(e.replaceAll("·"," · "))})}$(function(){init(),$(".btn-setting").click(function(){$(".category-layer").show(),$("body").addClass("active-layer-popup")}),$(".btn-reset").click(function(){jsonData=initJson,[].forEach.call(jsonData,function(e){var t="[data-code='"+e.code+"']",t=$(".category-list.type2 .category-item"+t);$(".category-list.type2").append(t),"Y"==e.display?(t.removeClass("unenabled"),t.find("input").prop("checked",!0)):(t.addClass("unenabled"),t.find("input").prop("checked",!1))})}),$(".btn-close").click(function(){$(".category-layer").hide(),$("body").removeClass("active-layer-popup")}),$(".btn-confirm").click(function(){settingCategory(),orderCategory(),$(".category-layer").hide(),$("body").removeClass("active-layer-popup")}),$(".category-list.type2 .category-item label").on("click",function(){var e=$(this).find("input[type='checkbox']"),t=$(this).find(".category-name");e.prop("checked")?(category_cnt++,$(this).parent().removeClass("unenabled"),toast("<strong>"+t.text()+"</strong> 카테고리가 설정되었습니다.")):(category_cnt--,$(this).parent().addClass("unenabled"),toast("<strong>"+t.text()+"</strong> 카테고리가 해제되었습니다.")),$(".category-description .description2 span").text(category_cnt)}),$(".category-list.type2 .category-move").on({touchstart:function(){$(this).closest(".category-item").addClass("ing")},touchend:function(){$(this).closest(".category-item").removeClass("ing")}}),$(".category-list.type2").sortable({tolerance:"pointer",scroll:!0,handle:$(".category-move"),delay:200,stop:function(e,t){$(t.item).removeClass("ing"),toast("<strong>"+$(t.item).text()+"</strong> 카테고리 순서가 변경되었습니다.")}}).disableSelection(),$(".category-list.type1 .category-name").on("click",function(e){e.preventDefault();e=$(this).attr("href"),e=$(e).offset().top-headerHeight;$(window).scrollTop(e)}),$(window).on("scroll",function(){fixedCategory()}),$("#category-wrap .goods-list").slick({infinite:!0,rows:4,slidesPerRow:2,arrows:!1}),$(".category-banner-list").slick({infinite:!0,slidesToShow:1,slidesToScroll:1,arrows:!1,dots:!0,fade:!0})});