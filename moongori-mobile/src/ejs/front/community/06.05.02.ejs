<!DOCTYPE html>
<html lang="ko">
<head>
<%-include('../_templates/_data.head.front.ejs', {
	pageStyle: 'page.community.css',
	pageJavascript: ''
}) %>
</head>
<body>
	<div id="page">
		<%-include('../_templates/_header.front.ejs') %>
		<!--page-body-->
		<div class="page-body" id="local">
			<!--local-head-->
			<div class="local-head">
				<h2 class="local-title"><span class="local-name">커뮤니티</span></h2>
				<!--local-control-->
				<div class="local-control">
					<span class="control-item"><a class="control-name" href="#"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" focusable="false"><title>이전으로</title><path d="M10.8,5.2c0.2,0.2,0.3,0.6,0.1,0.9l-0.1,0.1l-5.3,5.2l14.8,0c0.3,0,0.6,0.3,0.6,0.6c0,0.3-0.2,0.5-0.5,0.6l-0.1,0l-14.8,0l5.3,5.2c0.2,0.2,0.3,0.6,0.1,0.9l-0.1,0.1c-0.2,0.2-0.6,0.3-0.9,0.1l-0.1-0.1L3,12l6.8-6.8C10.1,4.9,10.5,4.9,10.8,5.2z"></path></svg></a></span>
					<span class="control-item"><a class="control-name" data-toggle-button="#pageBaseline" href="#pageBaseline"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" focusable="false"><title>메인으로</title><path d="M21.8,10.2L21.8,10.2l-8.1-6.6c-0.9-0.8-2.3-0.8-3.3,0l-8.1,6.6C2,10.4,1.9,10.8,2.1,11c0.2,0.3,0.6,0.3,0.8,0.1l1-0.8v7.1 c0,2,1.6,3.6,3.6,3.6h8.8c2,0,3.6-1.6,3.6-3.6v-7.1l1,0.8c0.1,0.1,0.2,0.1,0.4,0.1c0.2,0,0.3-0.1,0.5-0.2 C22.1,10.8,22,10.4,21.8,10.2z M18.8,17.4L18.8,17.4c0,1.3-1.1,2.4-2.4,2.4H7.6c-1.3,0-2.4-1.1-2.4-2.4V9.3l5.9-4.8 c0.5-0.4,1.3-0.4,1.8,0l5.9,4.8V17.4z M15,16c1.1,0,2-0.9,2-2c0-1.1-0.9-2-2-2s-2,0.9-2,2C13,15.1,13.9,16,15,16z M15,13.2 c0.4,0,0.8,0.4,0.8,0.8c0,0.4-0.4,0.8-0.8,0.8c-0.4,0-0.8-0.4-0.8-0.8C14.2,13.5,14.6,13.2,15,13.2z"></path></svg></a></span>
				</div>
				<!--//local-control-->
			</div>
			<!--//local-head-->
			<!--local-body-->
			<div class="local-body story-write" id="content">
				<!--content-head-->
				<div class="content-head">
					<h3 class="content-title"><span class="content-name">스토리</span></h3>
				</div>
				<!--//content-head-->
				<!--content-body-->
				<div class="content-body">
					<!--submit-form-->
					<div class="submit-form theme-a style-a type-a">
						<fieldset class="form-list">
							<legend>스토리 상세 내용 작성 서식</legend>
							<div class="form-item">
								<div class="form-head"><span class="form-name">공간, 주제 선택</span></div>
								<div class="form-body">
									<div class="form-area">
										<span class="form theme-a style-d type-a normal-03 large">
											<select class="form-elem">
												<option>공간</option>
											</select>
										</span>
										<span class="form theme-a style-d type-a normal-03 large">
											<select class="form-elem" disabled="disabled">
												<option>주제</option>
											</select>
										</span>
									</div>
								</div>
							</div>

							<div class="form-item">
								<div class="form-head"><span class="form-name">커버이미지 등록</span></div>
								<div class="form-body">
									<!--file-uploader-->
									<div class="file-uploader style-d type-a" data-bui-form="fileuploader">
										<div class="file-item">
											<input class="file-form" type="file" onchange="fileuploader(this);">
											<span class="file-type"></span>
											<span class="file-name"></span>
											<span class="file-clear"></span>
											<a class="btn button-edit" href="#">수정</a>
										</div>
										<!-- 커버이미지 추가 됐을 때
										<div class="file-item typed">
											<input class="file-form" type="file" onchange="fileuploader(this);">
											<span class="file-type" data-bui-file-type="image" style="background-image: url(./../../assets/images/@temporary/image-thumbnail-01@3x.png)"></span>
											<span class="file-name" data-bui-file-name="image-thumbnail-01@3x.png"></span>
											<span class="file-clear"></span>
											<a class="btn button-edit" href="#">수정</a>
										</div>
										-->
									</div>
									<!--//file-uploader-->
								</div>
							</div>

							<div class="form-item">
								<div class="form-head"><span class="form-name">제목</span></div>
								<div class="form-body">
									<div class="form-area">
										<span class="form theme-a style-b type-b normal-03 large flex">
											<input class="form-elem" type="text" maxlength="20" placeholder="제목">
											<span class="form-util"><span class="form-clear"></span></span>
											<div class="character-count"><strong class="input">0</strong><span class="part">/</span><span class="limit">20자</span></div>
										</span>
									</div>
								</div>
							</div>
						</fieldset>
					</div>
					<!--//submit-form-->

					<!--editor-area-->
					<div class="editor-area">
						<span>에디터 영역 입니다.</span>
					</div>
					<!--//editor-area-->
					
					<!--info-board-->
					<div class="info-board style-i type-a">
						<p class="board-head">부가정보</p>
						<p class="board-body">인테리어에 사용된 준비물과 비용, 소요시간을 추가적으로 입력하여 자세한 내용을 공유할 수 있습니다.</p>
					</div>
					<!--//info-board-->

					<!--submit-form-->
					<div class="submit-form theme-a style-a type-b">
						<fieldset class="form-list">
							<legend>스토리 부가 정보 작성 서식</legend>
							<div class="form-item">
								<div class="form-head"><span class="form-name">총 소요시간</span></div>
								<div class="form-body">
									<div class="form-area">
										<span class="form theme-a style-b type-b normal-03 large flex">
											<input class="form-elem" type="text" placeholder="시간" style="text-align:right;">
											<span class="form-util"><span class="form-clear"></span></span>
										</span>
										<span class="form theme-a style-b type-b normal-03 large flex">
											<input class="form-elem" type="text" placeholder="분" style="text-align:right;">
											<span class="form-util"><span class="form-clear"></span></span>
										</span>
									</div>
								</div>
							</div>

							<div class="form-item">
								<div class="form-head"><span class="form-name">소요비용</span></div>
								<div class="form-body">
									<div class="form-area">
										<span class="form theme-a style-b type-b normal-03 large flex">
											<input class="form-elem" type="text" placeholder="원" style="text-align:right;">
											<span class="form-util"><span class="form-clear"></span></span>
										</span>
									</div>
								</div>
							</div>

							<div class="form-item">
								<div class="form-head"><span class="form-name">준비물</span></div>
								<div class="form-body">
									<div class="form-area">
										<span class="form theme-a style-b type-b normal-03 large flex">
											<input class="form-elem" type="text" placeholder="필요한 것들을 입력해주세요.">
											<span class="form-util"><span class="form-clear"></span></span>
										</span>
									</div>
								</div>
							</div>

							<div class="form-item tag-write">
								<div class="form-head"><div class="form-name">태그작성</div></div>
								<div class="form-body">
									<div class="tag-area">
										<span class="input-text" data-text=""></span>
										<div class="tag-item"><span class="em style-a xx-small normal-03">#</span><input type="text" placeholder="태그입력" maxlength="10" oninput="tagSize(this)"><span class="form-util" onclick="tagDel(this)"><span class="form-clear"></span></span></div>
										<div class="tag-item on"><span class="em style-a xx-small normal-03">#</span><input type="text" placeholder="태그입력" maxlength="10" oninput="tagSize(this)"><span class="form-util" onclick="tagDel(this)"><span class="form-clear"></span></span></div>
									</div>
								</div>
							</div>
						</fieldset>
					</div>
					<!--//submit-form-->

					<!--button-area-->
					<div class="button-area style-a type-a">
						<button class="btn theme-a style-b type-a x-large accent-01 flex" type="submit"><span class="btn-text">등록</span></button>
					</div>
					<!--//button-area-->
				</div>
				<!--//content-body-->
			</div>
			<!--//local-body-->
		</div>
		<!--//page-body-->
		<%-include('../_templates/_footer.front.ejs') %>
	</div>
	<script>
		// 첨부파일
		function fileuploader(fileForm) {
			var fileType = fileForm.parentElement.querySelector('.file-type');
			var fileName = fileForm.parentElement.querySelector('.file-name');
			var fileClear = fileForm.parentElement.querySelector('.file-clear');

			if(fileForm.files.length === 0) {
				console.log('파일 삭제');
				fileForm.parentElement.classList.remove('typed');
				fileName.removeAttribute('data-bui-file-name');
				fileType.removeAttribute('data-bui-file-type');
				fileType.removeAttribute('style');
				fileForm.disabled = false;
			} else {
				console.log('파일 첨부');
				fileForm.parentElement.classList.add('typed');
				fileType.setAttribute('data-bui-file-type', fileForm.files[0].type.split('/')[0]);
				fileName.setAttribute('data-bui-file-name', fileForm.files[0].name);
				fileForm.disabled = true;

				if(fileForm.files[0].type.split('/')[0] === 'image') {
					fileType.setAttribute('style', 'background-image: url(' + URL.createObjectURL(fileForm.files[0]) + ')');
				} else {
					fileType.removeAttribute('style');
				}
			}
		};

		// 태그작성
		var tagInputArea = document.querySelector(".tag-area"),
			hide = document.querySelector('.input-text');

		var tagSize = function(elem) {
			if (elem.value.length < 11) {
					hide.dataset.text = elem.value;
					elem.style.width = hide.offsetWidth +'px';
				} 
		}

		// 입력된 태그 삭제
		var tagDel = function(elem) {
			if (tagInputArea.childElementCount > 2) {
				elem.parentNode.remove();
			}
		}
	</script>
</body>
</html>